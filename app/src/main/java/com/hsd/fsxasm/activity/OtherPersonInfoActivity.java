package com.hsd.fsxasm.activity;import org.xutils.DbManager;import org.xutils.x;import org.xutils.ex.DbException;import android.content.Intent;import android.view.View;import android.view.View.OnClickListener;import android.widget.TextView;import com.hsd.fsxasm.R;import com.hsd.fsxasm.base.BaseActivity;import com.hsd.fsxasm.db.MDbString;import com.hsd.fsxasm.db.MDbUser;import com.hsd.fsxasm.db.MDbUtils;import com.hsd.fsxasm.fragment.MeFragment;import com.hsd.fsxasm.global.SharedPreferencesString;import com.hsd.fsxasm.utils.FormatDate2String;public class OtherPersonInfoActivity extends BaseActivity {	private TextView nameText;	private TextView sexText;	private TextView birthdayText;	private TextView starText;	private TextView heightText;	private TextView signText;	private TextView idText;	private TextView schoolText;	private TextView departText;	private TextView homeText;	private TextView affectText;	private String name = "未加载";	private String sex = "未加载";	private String birthday = "未加载";	private String star = "未加载";	private String heigh = "未加载";	private String sign = "未加载";	private String id = "未加载";	private String school = "未加载";	private String depart = "未加载";	private String home = "未加载";	private String affect = "未加载";	private MDbUser currentUser;	private String currentUserPhone;	@Override	protected View initView() {		getDBDate();		View parent = View.inflate(this, R.layout.il_otherpersoninfo, null);		nameText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_nickname);		sexText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_gender);		birthdayText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_brithday);		starText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_constellation);		heightText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_height);		signText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_signature);		idText = (TextView) parent.findViewById(R.id.id_otherpersoninfo_id);		schoolText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_school);		departText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_department);		homeText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_location);		affectText = (TextView) parent				.findViewById(R.id.id_otherpersoninfo_affectivestate);		return parent;	}	/**	 * 从本地数据库中获取用户资料	 */	private void getDBDate() {		currentUserPhone = getConfigInfo(SharedPreferencesString.CURRENT_USER,				null);		if (currentUserPhone != null && currentUserPhone != "") {			DbManager db = x.getDb(MDbUtils.daoConfig);			try {				currentUser = db.selector(MDbUser.class)						.where(MDbString.phone, "=", currentUserPhone)						.findFirst();			} catch (DbException e) {				e.printStackTrace();			}			if (currentUser != null) {				name = currentUser.getUsername();				sex = currentUser.getSex();				birthday = FormatDate2String.FormatDate2String(currentUser.getBirthday());				star = currentUser.getStar();				heigh = currentUser.getHeight() + "cm";				sign = currentUser.getSign();				id = currentUser.getUser_id() + "";				school = currentUser.getSchool();				depart = currentUser.getDepartment();				home = currentUser.getLocation();				affect = currentUser.getStatus();			}		} else {		}	}	@Override	protected void updataUI(Object obj) {		// TODO Auto-generated method stub	}	@Override	protected void setListener() {		// TODO Auto-generated method stub		mBack.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				finish();			}		});		mHelp.setOnClickListener(new OnClickListener() {			@Override			public void onClick(View v) {				startActivityForResult(new Intent(OtherPersonInfoActivity.this,						SettingOtherPersonInfoActivity.class), 1);//				startActivity(new Intent(OtherPersonInfoActivity.this,//						SettingOtherPersonInfoActivity.class));			}		});	}	@Override	protected void initData() {		// TODO Auto-generated method stub		mTitle.setText("个人信息");		mHelp.setText("编辑");		mBack.setVisibility(View.VISIBLE);		mHelp.setVisibility(View.VISIBLE);		/**		 * name = currentUser.getUsername();				sex = currentUser.getSex();				birthday = FormatDate2String.FormatDate2String(currentUser.getBirthday());				star = currentUser.getStar();				heigh = currentUser.getHeight() + "";				sign = currentUser.getSign();				id = currentUser.getUser_id() + "";				school = currentUser.getSchool();				depart = currentUser.getDepartment();				home = currentUser.getLocation();				affect = currentUser.getStatus();		 */		nameText.setText(name);		sexText.setText(sex);		birthdayText.setText(birthday);		starText.setText(star);		heightText.setText(heigh);		signText.setText(sign);		idText.setText(id);		schoolText.setText(school);		 departText.setText(depart);		homeText.setText(home);		affectText.setText(affect);	}		@Override	protected void onActivityResult(int requestCode, int resultCode, Intent data) {		// TODO Auto-generated method stub		if(resultCode == 2){			changeUIDate();			setResult(2);		}		super.onActivityResult(requestCode, resultCode, data);	}	private void changeUIDate() {		getDBDate();		nameText.setText(name);		sexText.setText(sex);		birthdayText.setText(birthday);		starText.setText(star);		heightText.setText(heigh);		signText.setText(sign);		idText.setText(id);		schoolText.setText(school);		 departText.setText(depart);		homeText.setText(home);		affectText.setText(affect);	}}