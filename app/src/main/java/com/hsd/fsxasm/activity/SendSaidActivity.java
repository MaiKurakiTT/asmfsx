package com.hsd.fsxasm.activity;import java.util.ArrayList;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.view.View.OnClickListener;import android.widget.AdapterView;import android.widget.EditText;import android.widget.GridView;import android.widget.Toast;import android.widget.AdapterView.OnItemLongClickListener;import com.hsd.fsxasm.R;import com.hsd.fsxasm.adapter.SendSaidImageAdapter;import com.hsd.fsxasm.adapter.SendSaidImageAdapter.MyOnClickAddImageListener;import com.hsd.fsxasm.base.BaseActivity;import com.hsd.fsxasm.domain.BaseBean;import com.hsd.fsxasm.engine.NSendSaid;import com.hsd.fsxasm.engine.NUploadImage;import com.hsd.fsxasm.global.Constructs;public class SendSaidActivity extends BaseActivity{		private GridView gridView;		private EditText sayWhat;	private SendSaidImageAdapter adapter;		private ArrayList<String> images;		private ArrayList<String> imagesURL;	@Override	protected void initData() {		// TODO Auto-generated method stub		mTitle.setText("发表内容");		mHelp.setText("发布");	}	@Override	protected View initView() {		// TODO Auto-generated method stub		View parents = View.inflate(mActivity, R.layout.send_said, null);				gridView = (GridView) parents.findViewById(R.id.images);		sayWhat = (EditText) parents.findViewById(R.id.say_what);		images = new ArrayList<String>();		adapter = new SendSaidImageAdapter(images, mActivity, gridView, new MyOnClickAddImageListener() {						@Override			public void onClick() {				// TODO Auto-generated method stub				click();			}		});				gridView.setAdapter(adapter);				return parents;	}	@Override	protected void updataUI(Object obj) {		// TODO Auto-generated method stub		if(obj instanceof ArrayList){			imagesURL = (ArrayList<String>) obj;			String said = sayWhat.getText().toString();			NSendSaid nSendSaid = new NSendSaid(mActivity, new HttpResponseHandler());			nSendSaid.sendSaid(said, imagesURL);		}		if(obj instanceof BaseBean){			BaseBean bean = (BaseBean) obj;			Toast.makeText(mActivity, bean.getDescribe(), 0).show();			setResult(Constructs.FRIEND_CIRCLE_FRAGMENT);			finish();		}	}	@Override	protected void setListener() {		// TODO Auto-generated method stub		mBack.setVisibility(View.VISIBLE);		mBack.setOnClickListener(new OnClickListener() {						@Override			public void onClick(View v) {				// TODO Auto-generated method stub				finish();			}		});		mHelp.setVisibility(View.VISIBLE);		mHelp.setOnClickListener(new OnClickListener() {						@Override			public void onClick(View v) {				// TODO Auto-generated method stub				//发布				NUploadImage uplodaImage = new NUploadImage(mActivity, new HttpResponseHandler());				uplodaImage.uploadImage(images);			}		});				gridView.setOnItemLongClickListener(new OnItemLongClickListener() {			@Override			public boolean onItemLongClick(AdapterView<?> parent, View view,					int position, long id) {				// TODO Auto-generated method stub				System.out.println("要删除一张图片吗");				images.remove(position);				adapter.setData(images);								adapter.notifyDataSetChanged();				return true;			}		});	}			public void click() {		System.out.println("添加图片喽a a ");		Intent mIntent = new Intent(mActivity, SelectPhotoAlbumActivity.class);		startActivityForResult(mIntent, 1);		// startActivity(mIntent);	}		@Override	protected void onActivityResult(int requestCode, int resultCode, Intent data) {		// TODO Auto-generated method stub		System.out.println("点击页面收到了数据,即将加载数据");		Bundle bundle = data.getBundleExtra("list");		if(bundle==null){			return;		}		if (resultCode == 1) {			ArrayList<String> list = bundle.getStringArrayList("list");			images = list;			System.out.println("数据长度-----" + images.size());			adapter.setData(images);			adapter.notifyDataSetChanged();			gridView.setAdapter(adapter);			setListener();		}	}	}