package com.hsd.fsxasm.fragment;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;import android.content.Intent;import android.provider.SyncStateContract.Helpers;import android.support.v4.app.Fragment;import android.util.Log;import android.view.Gravity;import android.view.View;import android.view.View.OnClickListener;import android.widget.AdapterView;import android.widget.ImageView;import android.widget.PopupWindow;import android.widget.TextView;import android.widget.AdapterView.OnItemClickListener;import android.widget.Toast;import com.alibaba.fastjson.JSONArray;import com.google.android.gms.internal.ci;import com.hsd.fsxasm.R;import com.hsd.fsxasm.activity.MainFragmentActivity;import com.hsd.fsxasm.activity.SendSaidActivity;import com.hsd.fsxasm.adapter.FriendCircleAdapter;import com.hsd.fsxasm.adapter.FriendCircleAdapter.Holder;import com.hsd.fsxasm.base.BaseFragment;import com.hsd.fsxasm.domain.FriendCircleBean;import com.hsd.fsxasm.engine.NFindFriends;import com.hsd.fsxasm.engine.NFriendCircle;import com.hsd.fsxasm.global.TempInfo;import com.hsd.fsxasm.inter.OnClickSignPopListener;import com.hsd.fsxasm.utils.LogUtil;import com.hsd.fsxasm.utils.Utility;import com.hsd.fsxasm.widget.MPullToRefreshListView;import com.hsd.fsxasm.widget.PopWindow;import com.hsd.fsxasm.widget.SegmentView;import com.hsd.fsxasm.widget.SignPopupWindow;import com.hsd.fsxasm.widget.SegmentView.onSegmentViewClickListener;public class FriendCircleFragment extends BaseFragment{	private MPullToRefreshListView listView;		private Holder holder;		private PopWindow popwindow;	private PopupWindow popupwindow;		private ArrayList<Boolean> temps;		private List<FriendCircleBean> beans;		private FriendCircleAdapter adapter;		private SegmentView segmentView;	private SignPopupWindow signPopupWindow;	@Override	protected View initViews() {		// TODO Auto-generated method stub		View parents = View.inflate(mActivity, R.layout.il_friendcircle, null);		signPopupWindow = new SignPopupWindow(mActivity);		listView = (MPullToRefreshListView) parents.findViewById(R.id.ii_pull_flush_listview);		popupwindow = new PopupWindow(mActivity);		segmentView = (SegmentView) parents.findViewById(R.id.ii_segment);		segmentView.setOnClickable(2, false);		return parents;	}	@Override	protected void setListener() {		// TODO Auto-generated method stub		segmentView.setOnSegmentViewClickListener(new onSegmentViewClickListener() {						@Override			public void onSegmentViewClick(View v, int position) {				// TODO Auto-generated method stub				LogUtil.info("segmentView_friend", "");				if(position==1){					MainFragmentActivity activity = (MainFragmentActivity)mActivity;					List<Fragment> lists = activity.lists;					activity.showFragment(lists.get(0));				}			}		});				mHelp.setOnClickListener(new OnClickListener() {						@Override			public void onClick(View v) {				// TODO Auto-generated method stub				Intent intent = new Intent(mActivity,SendSaidActivity.class);				mActivity.startActivityForResult(intent, 1);			}		});					}	@Override	protected void updataUI(Object obj) {		// TODO Auto-generated method stub		FriendCircleBean bean = (FriendCircleBean) obj;		String result = bean.getBody();		//System.out.println(result);		JSONArray jsonArray = new JSONArray();		beans = jsonArray.parseArray(result, FriendCircleBean.class);		//beans = JSONArray.parseArray(result, FriendCircleBean.class);		adapter = new FriendCircleAdapter(mActivity, beans);		listView.setAdapter(adapter);		//Utility.setListViewHeightBasedOnChildren(listView.getRefreshableView());	}	@Override	protected void initData() {		// TODO Auto-generated method stub		mTitle.setVisibility(View.GONE);		segmentView.setVisibility(View.VISIBLE);		segmentView.setTwoSelect(true);		segmentView.setOneSelect(false);		mHelp.setVisibility(View.VISIBLE);		mHelp.setText("发布");		NFriendCircle circle = new NFriendCircle(mActivity, new HttpResponseHandler());		circle.friendCircle(TempInfo.findFirst.getUuid(), 1, 20);	}	@Override	public void flushData() {		// TODO Auto-generated method stub		LogUtil.info("flushData", "回调刷新了的方法");		NFriendCircle circle = new NFriendCircle(mActivity, new HttpResponseHandler());		circle.friendCircle(TempInfo.findFirst.getUuid(), 1, 20);	}}